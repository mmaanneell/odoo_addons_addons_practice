<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- CONTENU DU SNIPPET -->
    <template id="snippet_animaux" name="Animaux de la clinique">
        <!-- ^^ le template => bout de page web, reutilisable -->
        <section class="container my-5 js_clinique_animaux cols-3">
            <h2 class="text-center mb-4">Nos animaux !!!</h2>

            <div class="animal-liste">
                <t t-foreach="request.env['clinique.animal'].sudo().search([])" t-as="animal">
                    <!-- meme requete que dans le website_animaux ^^ -->
                    <!-- pour chaque animal, dans le modele 'clinique.animal'...-->
                    <!-- t-as="animal" = variable locale-->
                    <div class="animal-colonne mb-3">
                        <div class="card h-100 shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <t t-esc="animal.name" />
                                    <!-- t-esc = sécurité contre le HTML injecté-->
                                </h5>
                                <p class="card-text">
                                    <strong>Espèce :</strong>
                                    <t t-esc="animal.species" />
                                    <!-- t-esc = sécurité contre le HTML injecté-->
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </section>
    </template>

    <!-- SNIPPET PROPRIETAIRE -->
    <template id="snippet_proprietaires" name="Proprietaires de la clinique">
        <section class="container my-5">
            <h2 class="text-center mb-4">Les propriétaires</h2>

            <div class="row">
                <t t-foreach="request.env['clinique.proprietaire'].sudo().search([])" t-as="proprietaire">
                    <div class="card h-100 shadow-sm mb-2">
                        <div class="card-body">
                            <h5 class="card-title">
                                <t t-esc="proprietaire.name" />
                            </h5>
                            <p class="card-text mb-0">
                                <strong>Téléphone :</strong>
                                <t t-esc="proprietaire.phone_number" />
                            </p>
                            <p class="card-text mb-0">
                                <strong>Courriel :</strong>
                                <t t-esc="proprietaire.email" />
                            </p>
                        </div>
                    </div>
                </t>
            </div>
        </section>
    </template>

    <!-- AJOUT DU SNIPPET AU WEBSITE BUILDER -->
    <template id="clinique_snippets" inherit_id="website.snippets">
        <!-- ^^ modifie la vue website.snippets ^^ -->
        <!--<xpath expr="//snippets[@id='snippet_content']" position="inside">-->
        <xpath expr="//t[@t-snippet]" position="after">
            <!-- ^^ ouvre le template 'website.snippets'
            puis cherche les balises <t> qui ont 't-snippet="..." ' -->
            <!-- ^^ after => tout ce qui suit (ma balise t en dessous), doit etre
            inséré apres les elements trouvés en haut -->
            <t
                t-snippet="clinique_veterinaire.snippet_animaux"
                t-thumbnail="/clinique_veterinaire/static/description/clinique_logo_perroquet.png"
            />
            <!-- ^^ c'est ca qui permet le drag and drop ^^
            le snippet = un template QWeb (dans le module clinique_veterinaire)
            et son id = snippet_animaux -->
            <t
                t-snippet="clinique_veterinaire.snippet_proprietaires"
                t-thumbnail="/clinique_veterinaire/static/description/clinique_logo_cheval.png"
            />
        </xpath>
    </template>
</odoo>
